<!-- <!DOCTYPE html> -->
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>슬라이드 이펙트8</title>
  </head>

  <style>
    @import url(css/NexonLv1Gothic.css);
    @import url(css/dracula.min.css);
    @import url(css/custom.css);

    /* slider */
    .slider__wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .slider__img {
      /* 화면이 보이는 구간 */
      position: relative;
      width: 800px;
      height: 480px;
      overflow: hidden;
    }
    .slider__inner {
      /* 이미지 움직이는 영역 */
      position: relative;
      display: flex;
      width: 10000px; /* 이미지 총 길이 */
      left: -800px;
    }
    .slider__inner.transition {
      transition: all 600ms;
    }
    .slider {
      width: 800px;
      position: relative;
    }
    .slider::before {
      position: absolute;
      left: 5px;
      top: 5px;
      background: rgba(0, 0, 0, 0.4);
      color: #fff;
      padding: 5px 10px 3px;
    }

    .slider.s1::before {
      content: "이미지1";
    }
    .slider.s2::before {
      content: "이미지2";
    }
    .slider.s3::before {
      content: "이미지3";
    }
    .slider.s4::before {
      content: "이미지4";
    }
    .slider.s5::before {
      content: "이미지5";
    }

    /* .slider__btn {} */
    .slider__btn a {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 100;
      width: 50px;
      height: 50px;
      background: rgba(0, 0, 0, 0.4);
      text-align: center;
      line-height: 50px;
      transition: all 0.2s;
      display: block;
      color: #fff;
      text-decoration: none;
    }
    .slider__btn a.prev {
      left: 0;
    }
    .slider__btn a.next {
      right: 0;
    }
    .slider__btn a:hover {
      background: rgba(241, 96, 86);
    }
    .slider__dot {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 20px;
    }
    .slider__dot .dot {
      width: 20px;
      height: 20px;
      background: rgba(238, 49, 49, 0.4);
      display: inline-block;
      border-radius: 50%;
      transition: all 0.3s;
      margin: 3px;
    }
    .slider__dot .dot.active {
      background: rgba(255, 255, 255, 0.9);
    }
    .slider__dot .play {
      width: 20px;
      height: 20px;
      display: inline-block;
      vertical-align: 9px;
      margin: 3px;
      text-indent: -9999px;
      position: relative;
      display: none;
    }
    .slider__dot .play.show {
      display: inline-block;
    }
    .slider__dot .play::after {
      content: "";
      border-style: solid;
      border-width: 10px 0 10px 16px;
      border-color: transparent transparent transparent #fff;
      position: absolute;
      left: 2px;
      top: 8px;
    }
    .slider__dot .stop {
      width: 20px;
      height: 20px;
      display: inline-block;
      vertical-align: 9px;
      margin: 3px;
      text-indent: -9999px;
      position: relative;
      display: none;
    }
    .slider__dot .stop.show {
      display: inline-block;
    }
    .slider__dot .stop::before {
      content: "";
      width: 5px;
      height: 20px;
      background: #fff;
      position: absolute;
      left: 2px;
      top: 9px;
      border-radius: 20px;
    }
    .slider__dot .stop::after {
      content: "";
      width: 5px;
      height: 20px;
      background: #fff;
      position: absolute;
      right: 4px;
      top: 9px;
      border-radius: 20px;
    }
  </style>

  <body class="img12">
    <!-- main -->
    <main>
      <section id="sliderType02">
        <div class="slider__wrap">
          <div class="slider__img">
            <div class="slider__inner">
              <div class="slider s1">
                <img src="img/img06.jpg" alt="이미지6" />
              </div>
              <div class="slider s2">
                <img src="img/img07.jpg" alt="이미지7" />
              </div>
              <div class="slider s3">
                <img src="img/img08.jpg" alt="이미지8" />
              </div>
              <div class="slider s4">
                <img src="img/img09.jpg" alt="이미지9" />
              </div>
              <div class="slider s5">
                <img src="img/img10.jpg" alt="이미지10" />
              </div>
            </div>
          </div>
          <div class="slider__btn">
            <a href="#" class="prev">prev</a>
            <a href="#" class="next">next</a>
          </div>
        </div>
        <div class="slider__dot">
          <!-- <a href="#" class="dot active"></a>
                <a href="#" class="dot"></a>
                <a href="#" class="dot"></a>
                <a href="#" class="dot"></a>
                <a href="#" class="dot"></a> -->
        </div>
      </section>
    </main>

    <!-- //main -->

    <!-- info -->
    <div class="info">
      <div class="title">
        <h1><a href="sliderEffect.html">JavaScript Slider Effect08</a></h1>
        <p>
          이미지 슬라이드 - 무한, 버튼 추가, 닷 버튼, 자동 플레이, 시작 버튼,
          정지 버튼
        </p>
      </div>
      <div class="number">
        <ul>
          <li><a href="sliderEffect01.html">1</a></li>
          <li><a href="sliderEffect02.html">2</a></li>
          <li><a href="sliderEffect03.html">3</a></li>
          <li><a href="sliderEffect04.html">4</a></li>
          <li><a href="sliderEffect05.html">5</a></li>
          <li><a href="sliderEffect06.html">6</a></li>
          <li><a href="sliderEffect07.html">7</a></li>
          <li class="active"><a href="sliderEffect08.html">8</a></li>
        </ul>
      </div>

      <div class="source">
        <button class="source-btn">소스보기</button>
        <div id="modal">
          <div class="modal-wrap">
            <div class="modal-cont">
              <div class="code-view">
                <div class="view-header" aria-hidde="true">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
                <div class="view-title">
                  <ul>
                    <li class="active"><a href="#">HTML</a></li>
                    <li><a href="#">CSS</a></li>
                    <li><a href="#">JavaScript</a></li>
                  </ul>
                </div>
                <div class="view-cont">
                  <div>
                    <pre><code class="language-html">

</code></pre>
                  </div>
                  <!-- //cont1 -->
                  <div>
                    <pre><code class="language-javascript">

</code></pre>
                  </div>
                  <!-- //cont2 -->
                  <div>
                    <pre><code class="language-javascript">

</code></pre>
                  </div>
                  <!-- //cont3 -->
                </div>
              </div>
            </div>
            <button class="modal-close">닫기</button>
          </div>
        </div>
      </div>
    </div>
    <!-- //info -->

    <!-- script -->
    <script src="js/gsap.min.js"></script>
    <script src="js/highlight.min.js"></script>
    <script src="js/custom.js"></script>

    <script>
      highlight();
      modal();
      tapMenu();

      //slider08
      const sliderWrap = document.querySelector(".slider__wrap");
      const sliderImg = document.querySelector(".slider__img");
      const sliderInner = document.querySelector(".slider__inner");
      const slider = document.querySelectorAll(".slider");
      const sliderBtn = document.querySelector(".slider__btn");
      const sliderBtnPrev = sliderBtn.querySelector(".prev");
      const sliderBtnNext = sliderBtn.querySelector(".next");
      const sliderDot = document.querySelector(".slider__dot");

      let currentIndex = 0;
      let sliderWidth = sliderImg.offsetWidth; //이미지 가로값
      let sliderLength = slider.length; //이미지 갯수
      let slideFirst = slider[0]; //첫 번째 이미지
      let slideLast = slider[sliderLength - 1]; //마지막 이미지
      let cloneFirst = slideFirst.cloneNode(true); //첫 번째 이미지 복사
      let cloneLast = slideLast.cloneNode(true); //마지막 이미지 복사  제이쿼리 = clone 메소드
      let posInitial = "";
      let dotIndex = "";
      let sliderTimer = "";
      let interval = 1000;

      //이미지 복사 appendTo//prependYo // append//prepend
      sliderInner.appendChild(cloneFirst);
      sliderInner.insertBefore(cloneLast, slideFirst);

      function gotoSlider(index) {
        sliderInner.classList.add("transition");

        sliderInner.style.left = -sliderWidth * (index + 1) + "px";

        console.log(currentIndex);
        currentIndex = index;
        dotActive();
      }

      function dotInit() {
        for (let i = 0; i < sliderLength; i++) {
          dotIndex += "<a href='#' class='dot'></a>";
        }
        dotIndex += "<a href='#' class='play'></a>";
        dotIndex += "<a href='#' class='stop show'></a>";
        sliderDot.innerHTML = dotIndex;
        sliderDot.firstElementChild.classList.add("active");
      }
      //닷 버튼 활성화
      function dotActive() {
        let dotAll = document.querySelectorAll(".slider__dot .dot");
        dotAll.forEach((dot) => {
          //전체 닷 메뉴 비활성화
          dot.classList.remove("active");
        });

        //마지막 이미지 왔을 때
        if (currentIndex == sliderLength) {
          dotAll[0].classList.add("active");
        } else if (currentIndex == -1) {
          dotAll[sliderLength - 1].classList.add("active"); //처음 이미지 왔을 때
        } else {
          //현재 보고 있는 이미지 닷 활성화
          dotAll[currentIndex].classList.add("active");
        }
      }
      dotInit();

      function autuPlay() {
        sliderTimer = setInterval(() => {
          gotoSlider(currentIndex + 1);
        }, interval);
      }

      autuPlay();

      function stopPlay() {
        clearInterval(sliderTimer);
      }

      sliderBtnPrev.addEventListener("click", () => {
        let prevIndex = currentIndex - 1;
        gotoSlider(prevIndex);
      });

      sliderBtnNext.addEventListener("click", () => {
        let nextIndex = currentIndex + 1;
        gotoSlider(nextIndex);
      });

      sliderInner.addEventListener("transitionend", () => {
        sliderInner.classList.remove("transition");

        if (currentIndex == -1) {
          sliderInner.style.left = -(sliderLength * sliderWidth) + "px";
          currentIndex = sliderLength - 1;
        }
        if (currentIndex == sliderLength) {
          sliderInner.style.left = -(1 * sliderWidth) + "px";
          currentIndex = 0;
        }
      });

      // if(document.querySelector(".stop").classList.contains("show")){
      //     sliderInner.addEventListener("mouseenter", () => {
      //     document.querySelector(".stop").classList.remove("show");
      //     document.querySelector(".play").classList.add("show");
      //     stopPlay();
      //     })
      // }

      sliderInner.addEventListener("mouseenter", () => {
        stopPlay();
      });
      sliderInner.addEventListener("mouseleave", () => {
        if (document.querySelector(".play").classList.contains("show")) {
          stopPlay();
        } else {
          autuPlay();
        }
      });

      document.querySelector(".play").addEventListener("click", () => {
        document.querySelector(".play").classList.remove("show");
        document.querySelector(".stop").classList.add("show");
        autuPlay();
      });
      document.querySelector(".stop").addEventListener("click", () => {
        document.querySelector(".stop").classList.remove("show");
        document.querySelector(".play").classList.add("show");
        stopPlay();
      });
    </script>
  </body>
</html>
